routes:
  users_service:
    path: '/users'
    target: 'https://jsonplaceholder.typicode.com/users'
    methods: ['GET', 'POST']
    authentication:
        type: 'none'
    logging:
      enabled: true
      type: 'stream'
      level: 'info'

  user_service:
      path: '/users/{id}/'
      target: 'https://jsonplaceholder.typicode.com/users/{id}/'
      methods: [ 'GET', 'POST' ]
      authentication:
          type: 'none'
      response_filter:
          include: [ 'id', 'name', 'username' ]
      cache:
        ttl: 10
      middleware:
        - 'App\Middleware\LoggingMiddleware'
        - 'App\Middleware\CustomValidationMiddleware'

  posts_service:
    path: '/posts'
    target: 'https://jsonplaceholder.typicode.com/posts'
    methods: ['GET', 'POST', 'PUT', 'DELETE']
    authentication:
        type: 'api_key'
        header: 'Authorization'
        prefix: 'Bearer '
        keys: [ 'bearer-token-1', 'bearer-token-2' ]
    rate_limit:
      limit: 50
      period: 60
      per_client: true
    logging:
      enabled: true
      type: 'file'
      level: 'debug'

  post_service:
      path: '/posts/{id}/'
      target: 'https://jsonplaceholder.typicode.com/posts/{id}/'
      methods: [ 'GET', 'POST' ]
      authentication:
          type: 'none'
      timeout:
          duration: 60
          retries: 3
          retry_delay: 500
      response_filter:
          exclude: [ 'userId', 'id' ]

  comments_service:
    path: '/comments'
    target:
        - 'https://jsonplaceholder.typicode.com/comments'
        - 'https://jsonplaceholder.typicode.com/comments'
        - 'https://jsonplaceholder.typicode.com/posts'
    methods: ['GET', 'POST']
    authentication:
      type: 'basic'
      users:
        - username: 'admin'
          password: 'password123'
        - username: 'user'
          password: 'userpass'
    rate_limit:
      limit: 200
      period: 3600
    cache:
      ttl: 180
